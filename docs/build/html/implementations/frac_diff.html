

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fractionally Differentiated Features &mdash; mlfinlab 0.3.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contact" href="../additional_information/contact.html" />
    <link rel="prev" title="Sampling" href="sampling.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> mlfinlab
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/barriers_to_entry.html">Barriers to Entry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/requirements.html">Requirements</a></li>
</ul>
<p class="caption"><span class="caption-text">Implementations</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data_structures.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_product.html">Multi-Product Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="labeling.html">Labeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling.html">Sampling</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Fractionally Differentiated Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#implementation">Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#research-notebook">Research Notebook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Fractionally Differentiated Features</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Additional Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../additional_information/contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional_information/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional_information/license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mlfinlab</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Fractionally Differentiated Features</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/implementations/frac_diff.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fractionally-differentiated-features">
<span id="implementations-frac-diff"></span><h1>Fractionally Differentiated Features<a class="headerlink" href="#fractionally-differentiated-features" title="Permalink to this headline">¶</a></h1>
<p>One of the challenges of quantitative analysis in finance is that price time series have trends or non-constant mean. This makes the time series non-stationary. Non-stationary time series are hard to work with when we want to do inferential analysis such as average and variance of returns, or probability of loss. Stationary series also help in supervised learning methods. Specifically, in supervised learning one needs to map hitherto unseen observations to a set of labeled examples and determine the label of the new observation. As Marcos Lopez de Prado (MLdP) says in Chapter 5, “if the features are not stationary we cannot map the new observation to a large number of known examples”. However, to make a time series (or a feature) stationary often requires data transformations like computing changes (change in price, yields or volatility). These transformations also leave the time series bereft of any memory and thereby reducing or eliminating its predictive capability. Fractionally differentiated features tackle this problem by deriving features through fractionally differentiating a time series to the point where the series is stationary, but not over differencing such that we lose all predictive power.</p>
<p>The following graph shows a fractionally differenced series plotted over the original closing price series:</p>
<a class="reference internal image-reference" href="../_images/frac_diff_graph.png"><img alt="../_images/frac_diff_graph.png" class="align-center" src="../_images/frac_diff_graph.png" style="width: 570.7px; height: 344.5px;" /></a>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>The following function implemented in mlfinlab can be used to derive fractionally differentiated features</p>
<p>Source: Chapter 5, AFML (section 5.5, page 83);</p>
<p>The steps are as follows:</p>
<ul class="simple">
<li><p>Compute weights (this is a one-time exercise)</p></li>
<li><p>Iteratively apply the weights to the price series and generate output points</p></li>
</ul>
<p>This is the expanding window variant of the fracDiff algorithm</p>
<p>Note 1: For thresh-1, nothing is skipped</p>
<p>Note 2: diff_amt can be any positive fractional, not necessarility bounded [0, 1]</p>
<dl class="function">
<dt id="frac_diff_ffd">
<code class="sig-name descname">frac_diff_ffd</code><span class="sig-paren">(</span><em class="sig-param">series</em>, <em class="sig-param">diff_amt</em>, <em class="sig-param">thresh=1e-5)</em><span class="sig-paren">)</span><a class="headerlink" href="#frac_diff_ffd" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> – (pd.Series) a time series that needs to be differenced</p></li>
<li><p><strong>diff_amt</strong> – (float) Differencing amount</p></li>
<li><p><strong>thresh</strong> – (float) threshold or epsilon</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(pd.DataFrame) data frame of differenced series</p>
</dd>
</dl>
</dd></dl>

<p>Given that we know the amount we want to difference our price series, fractionally differentiated features can be derived as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">mlfinlab.features.fracdiff</span> <span class="k">import</span> <span class="n">frac_diff_ffd</span>


<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;FILE_PATH&#39;</span><span class="p">)</span>

<span class="n">frac_diff_series</span> <span class="o">=</span> <span class="n">frac_diff_ffd</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">],</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="research-notebook">
<h2>Research Notebook<a class="headerlink" href="#research-notebook" title="Permalink to this headline">¶</a></h2>
<p>The following research notebook can be used to better understand fractionally differentiated features</p>
<div class="section" id="id1">
<h3>Fractionally Differentiated Features<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/hudson-and-thames/research/blob/master/Chapter5/Chapter5_Exercises.ipynb">Fractionally Differentiated Features</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../additional_information/contact.html" class="btn btn-neutral float-right" title="Contact" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sampling.html" class="btn btn-neutral float-left" title="Sampling" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Hudson &amp; Thames

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>